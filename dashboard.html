<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>API 571 Damage Mechanism Dashboard</title>

  <!-- ‚úÖ SEO Meta Tags -->
  <meta name="description" content="Visualize and manage API-based damage mechanisms online. Free and interactive tool.">
  <meta name="keywords" content="API 571, Damage Mechanism Tool, Corrosion Calculator, API 581, RBI Tool, Inspection Dashboard, CUI, Sulfidation, CO2 Corrosion, High Temperature Corrosion, Representative Fluids">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://kayetdms.live/">
  
  <link rel="stylesheet" href="style.css"/>
  <link rel="stylesheet" href="scec8div1.css"/>
  <link rel="stylesheet" href="crackingmechanism.css"/>

   
  
  <!-- ‚úÖ For Remaining css -->  
  <link rel="stylesheet" href="remaininglife.css"> 

  <!-- ‚úÖ For Remaining css -->
  <link rel="stylesheet" href="Toxic.css">

   <!-- ‚úÖ For  probability css -->
  <link rel="stylesheet" href=" probability.css">

 
    <!-- ‚úÖ For Remaining css -->
  <link rel="stylesheet" href="inventory.css">

  <!-- ‚úÖ For stress value css -->
  <link rel="stylesheet" href="bk_stress.css"> 

    <!-- ‚úÖ For stress value css -->
  <link rel="stylesheet" href="chatbot.css"> 
  
   <!-- ‚úÖ For inspection cofidence css -->
  <link rel="stylesheet" href="inspectionconfidence.css"> 

   <!-- ‚úÖ For api 581 cof css -->
  <link rel="stylesheet" href="api581cof.css"> 

<!-- ‚úÖ For globaly ibeam css -->
  <link rel="stylesheet" href="global-style.css">


     <!-- ‚úÖ For Process Flow Diagrams css -->
  <link rel="stylesheet" href="Flowdiagrams.css"> 
  <link rel="stylesheet" href="cduvdu.css"> 
  <link rel="stylesheet" href="msp.css">
   <link rel="stylesheet" href="h2u.css">


  
  <!-- ‚úÖ Select2 Dropdown CSS (for Representative Fluid multi-select) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  
<!-- ‚úÖ Paste these favicon links BELOW the CSS line -->
  <link rel="apple-touch-icon" sizes="180x180" href="image/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="image/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="image/favicon-16x16.png">
  <link rel="manifest" href="image/site.webmanifest">
  <link rel="icon" type="image/png" href="image/favicon.png" />

  
  <style>
    .tab-content { display: none; margin-top: 20px; }
    label { display: block; margin-top: 10px; }
    input, select { width: 200px; }
    #result, #corrosionResult, #corrosionResultFull {
      margin-top: 20px; padding: 10px; border: 1px solid #ccc; background: #f9f9f9;
    }
    .category { cursor: pointer; font-weight: bold; margin-top: 10px; display: block; }
    .mechanisms { display: none; list-style-type: circle; margin-left: 20px; }
    .mechanisms li { margin: 5px 0; }
    footer.footer {
      margin-top: 30px; padding: 10px; background-color: #f0f0f0; text-align: center; border-top: 1px solid #ccc;
    }
    /* ‚úÖ Background image for login */
    .login-background {
      background: url('images/bg.jpg') no-repeat center center / cover;
      background-size: cover;
      background-position: center;
    }
  </style>
</head>

<!-- ‚úÖ Keep body tag simple -->
<body>
  <script>
    const user = localStorage.getItem("loggedInUser");

    // ‚úÖ Redirect to login page if not logged in
    if (!user && !window.location.href.includes("lndex.html")) {
      window.location.href = "lndex.html";
    }

    // ‚úÖ Add background image only on login.html
    if (window.location.href.includes("login.html")) {
      document.body.classList.add("login-background");
    }
     </script>

<div class="top-bar">
  <div id="welcome">Welcome to API 571 Damage Mechanism Dashboard</div>
  
  <div class="scroll-container">
    <div id="scrollText"></div>
  </div>

  <div class="settings-menu">
    <button id="settingsBtn" type="button">‚öôÔ∏è</button>
    <div class="dropdown-content" id="dropdownContent">
      <button onclick="exportToPDF()">Export PDF</button>
      <button onclick="exportToExcel()">Export Excel</button>
      <button onclick="toggleDarkMode()">Toggle Light/Dark Mode</button>
      <button onclick="openHelp()">‚ùì Help</button>
    </div>
  </div>
</div>

  
<div class="container">
      <div class="sidebar">
        <h3>Features</h3>
        <input type="text" id="searchBox" placeholder="Search ..." />
        <ul id="categoryList"></ul>
      </div>

      <div class="content">
        <h3 id="selectedMechanismTitle">Select a Damage Mechanism</h3>
        <div id="mechanismDetailsContainer"></div>

      <!-- ‚úÖ Updated Welcome Panel -->
<div class="welcome-panel" id="welcomePanel">
  <!-- Top Banner -->
  <img src="assets/dashboard-welcome.svg" alt="Dashboard Welcome Banner" class="welcome-img" />


  <!-- Info Cards -->
  <div class="info-grid">
    <div class="info-card">
      <img src="assets/damage-explorer.svg" class="section-banner" alt="Damage Mechanism Explorer" />
      <h3>API 571</h3>
      <p>Explore over 60 damage mechanisms affecting pressure equipment, as per API 571.</p>
    </div>
    <div class="info-card">
      <img src="assets/corrosion-calculator.svg" class="section-banner" alt="Corrosion Rate Tool" />
      <h3>API 581</h3>
      <p>Calculate corrosion rates for CUI, CO‚ÇÇ, sulfidation, and more using RBI methodology.</p>
    </div>
    <div class="info-card">
      <img src="assets/mechanism-finder.svg" class="section-banner" alt="Mechanism Finder" />
      <h3>Find Mechanism</h3>
      <p>Input process conditions to identify potential damage mechanisms using smart rules.</p>
    </div>
    <div class="info-card">
      <img src="assets/fluid-library.svg" class="section-banner" alt="Fluid Data" />
      <h3>Representative Fluids</h3>
      <p>Access a built-in fluid library with properties for risk, release rate, and consequence.</p>
    </div>
    <div class="info-card">
      <img src="assets/inventorytool.svg" class="section-banner" alt="Inventory Calculator" />
      <h3>Inventory Calculator</h3>
      <p>Estimate release mass and leak rates for various shapes and conditions per API 581.</p>
    </div>
  </div>
</div>
<!-- ‚úÖ End Welcome Panel -->

        <div class="tab-content" id="criteriaTab">
  <h3>Damage Mechanism Finder Tools</h3>
  <form id="filterForm" class="grid-form">
    <label>Material:
      <select id="material">
        <option>Carbon Steel</option>
        <option>304 SS</option>
        <option>316 SS</option>
        <option>5Cr-0.5Mo</option>
        <option>9Cr-1Mo</option>
      </select>
    </label>

    <label>Max Temperature (¬∞C):
      <input type="number" id="temperature" />
    </label>

    <label>Min Temperature (¬∞C):
      <input type="number" id="mintemp" />
    </label>

    <label>Environment:
      <input type="text" id="environment" placeholder="e.g., Wet H2S, Amine" />
    </label>

    <label>pH:
      <input type="number" id="ph" step="0.1" />
    </label>

    <label>H‚ÇÇ Partial Pressure (MPa):
      <input type="number" id="h2pp" step="0.1" />
    </label>

    <label>Chloride (ppm):
      <input type="number" id="chloride" />
    </label>

    <label>Flow:
      <select id="flow">
        <option>Turbulent</option>
        <option>Stagnant</option>
      </select>
    </label>

    <label>Sulfur Content (%):
      <input type="number" id="sulfur" step="0.01" />
    </label>

    <label>Fluid Phase:
      <select id="phase">
        <option>Liquid</option>
        <option>Gas</option>
        <option>Two-phase</option>
      </select>
    </label>

    <label>Welded Component:
      <select id="weld">
        <option>Yes</option>
        <option>No</option>
      </select>
    </label>

    <label>Insulated:
      <select id="insulated">
        <option>Yes</option>
        <option>No</option>
      </select>
    </label>

    <label>Exposed to Moisture:
      <select id="exposed">
        <option>Yes</option>
        <option>No</option>
      </select>
    </label>

    <label>Cyclic Conditions:
      <select id="cycled">
        <option>Yes</option>
        <option>No</option>
      </select>
    </label>

    <div class="full-row">
      <button type="submit">Find Damage Mechanisms</button>
    </div>
  </form>

  <div id="result" style="display:none;"></div>
        </div>

        <div class="tab-content" id="corrosionRateTab">
          <h3>üõ†Ô∏è Damage Mechanism ‚Äì Corrosion Rate Estimator</h3>
          <label>Select Damage Mechanism:
            <select id="dmSelector" onchange="loadCriteria()"></select>
          </label>
          <div id="criteriaForm"></div>
          <button onclick="calculateCorrosion()">üîç Calculate</button>
          <div id="corrosionResult"></div>
        </div>

        <div class="tab-content" id="corrosionFullTab">
          <header class="header">
            <h1> Corrosion Rate Dashboard</h1>
          </header>

          <main class="main-content">
  <div class="form-section">
    <label for="dmSelectFull">‚öôÔ∏è Select Damage Mechanism:</label>
    <select id="dmSelectFull">
      <option value="">-- Choose Mechanism --</option>
      <option value="Alkaline Sour Water Corrosion">Alkaline Sour Water Corrosion</option>
      <option value="Acid Sour Water Corrosion">Acid Sour Water Corrosion</option>
      <option value="cui">CUI (Corrosion Under Insulation)</option>
      <option value="co2">CO‚ÇÇ Corrosion</option>
      <option value="oxidation">High-temperature Oxidation</option>
      <option value="HCl Corrosion">HCl Corrosion</option>
      <option value="H2SO4 Corrosion">H2SO4 Corrosion</option>
      <option value="sulfidation">Sulfidation & NAP Acid Corrosion</option>
    </select>
    <div id="formContainerFull"></div>
    <button id="calculateBtnFull">üöÄ Calculate Corrosion Rate</button>
  </div>

  <div id="corrosionResultFull" class="result-section"></div>

  <div style="position: relative; height: 300px; width: 100%; margin-top: 20px;">
    <canvas id="myChart"></canvas>
  </div>
</main>
</div> <!-- closes corrosionFullTab -->

<!-- ‚úÖ API 581 - Representative Fluids FIXED -->
<div class="tab-content" id="fluidSelectorTab">
  <main class="main-content" style="padding: 20px;">
    <h3 style="margin-bottom: 20px;">üß™ Process Representative Fluids</h3>

    <!-- ‚úÖ Input container -->
    <div style="margin-bottom: 20px;">
      <label for="materialFilter" style="display: block; font-weight: bold; margin-bottom: 5px;">Select Fluid Group:</label>
      <select id="materialFilter" multiple style="width: 100%; max-width: 500px;"></select>
    </div>

    <!-- ‚úÖ Scrollable Table Wrapper -->
    <div style="overflow-x: auto; width: 100%;">
      <table id="fluidTable" style="min-width: 700px; width: 100%; border-collapse: collapse;">
        <thead>
          <tr>
            <th>Representative Fluid</th>
            <th>Applicable Materials</th>
            <th>MW</th>
            <th>NBP (¬∞C)</th>
            <th>NBP (¬∞F)</th>
            <th>AIT (¬∞C)</th>
            <th>AIT (¬∞F)</th>
          </tr>
        </thead>
        <tbody id="fluidBody"></tbody>
      </table>
    </div>

    <!-- ‚úÖ No Data Message -->
    <div class="no-data" id="noDataMessage" style="margin-top: 15px;">
      No fluids selected. Please choose from above.
    </div>

    <!-- ‚úÖ Note Section -->
    <div id="noteSection" style="display: none; margin-top: 15px; background: #f9f9f9; padding: 10px; border-left: 4px solid #007bff;">
      <strong>Note:</strong>
      <ul style="margin-left: 20px; padding-left: 10px;">
        <li><strong>MW</strong>: Molecular Weight</li>
        <li><strong>NBP (¬∞C)</strong>: Normal Boiling Point in Celsius</li>
        <li><strong>NBP (¬∞F)</strong>: Normal Boiling Point in Fahrenheit</li>
        <li><strong>AIT (¬∞C)</strong>: Auto-Ignition Temperature in Celsius</li>
        <li><strong>AIT (¬∞F)</strong>: Auto-Ignition Temperature in Fahrenheit</li>
      </ul>
    </div>

  </main>
</div>

    
      <!-- ‚úÖ Corrosion Rate Calculator Tab -->
<!-- ‚úÖ Corrosion Rate Calculator Tab -->
<div class="tab-content" id="remainingLifeTab">
  <h3>üß™ Corrosion Rate Calculator</h3>

  <div class="form-grid-4">
    <div>
      <label for="baseDate">Base Date:</label>
      <input type="date" id="baseDate">
    </div>
    <div>
      <label for="baseThk">Base Thickness (mm):</label>
      <input type="number" id="baseThk" step="0.01">
    </div>
    <div>
      <label for="midDate">Middle Date (optional):</label>
      <input type="date" id="midDate">
    </div>
    <div>
      <label for="midThk">Middle Thickness (mm):</label>
      <input type="number" id="midThk" step="0.01">
    </div>
    <div>
      <label for="lastDate">Last Date:</label>
      <input type="date" id="lastDate">
    </div>
    <div>
      <label for="lastThk">Last Thickness (mm):</label>
      <input type="number" id="lastThk" step="0.01">
    </div>
    <div>
      <label for="tmin">T-Min (mm):</label>
      <input type="number" id="tmin" step="0.01">
    </div>
    <div>
      <label for="freq">OISD Frequency (Months):</label>
      <input type="number" id="freq" step="1" value=" ">
    </div>
  </div>

  <!-- Action Buttons (Align in a row) -->
  <div class="action-buttons">
    <button class="btn" onclick="calculate()">üìä Calculate</button>
    <button class="btn" onclick="downloadTemplate()">‚¨áÔ∏è Download CSV Template</button>
    
    <!-- Bulk Upload Section -->
    <div class="bulk-upload">
      <input type="file" id="bulkUpload" accept=".csv,text/csv" />
      <button class="btn" onclick="parseCSV()">üì• Upload & Parse</button>
    </div>
  </div>


  <!-- üîç Bulk Preview Modal -->
  <div id="bulkPreviewModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">√ó</span>

      <div class="preview-buttons">
        <h4 style="margin: 0;">üìã CSV Preview</h4>
        <button class="btn" onclick="exportBulkTableToExcel()">üìÅ Export to Excel</button>
        <button class="btn" onclick="exportBulkTableToPDF()">üìÑ Export to PDF</button>
      </div>

      <table id="bulkPreviewTable" class="table-preview"></table>
    </div>
  </div>

  <!-- ‚úÖ Analysis Output -->
  <div class="analysis-output">
    <h4>üìò Analysis Output</h4>
    <div class="output-row"><span>Controlling Corrosion Rate:</span> <span id="ccr"></span></div>
    <div class="output-row"><span>Long Term Corrosion Rate:</span> <span id="ltcr"></span></div>
    <div class="output-row"><span>Short Term Corrosion Rate:</span> <span id="stcr"></span></div>
    <div class="output-row"><span>Scheduled Next Inspection Date:</span> <span id="schedDate"></span></div>
    <div class="output-row"><span>Interval Next Inspection Date:</span> <span id="intDate"></span></div>
    <div class="output-row"><span>Factor  Life Date:</span> <span id="factorDate"></span></div>
    <div class="output-row"><span>Projected Tmin Date:</span> <span id="projDate"></span></div>
    <div class="output-row"><span>T-Min Value:</span> <span id="tminVal"></span></div>
    <div class="output-row"><span>Estimated  Life:</span> <span id="remLife"></span></div>
  </div>

  <!-- ‚úÖ Trend Chart (Moved Inside the Tab) -->
  <div class="chart-container" style="margin-top: 25px;">
    <h4>üìà Thickness Trend Over Time</h4>
    <canvas id="thicknessTrendChart" style="width:100%; height:260px;"></canvas>
  </div>
</div>


     <!-- ================= API 581 Level 2 ‚Äì Consequence of Failure Calculator ================= -->
<div id="cof_calculatorTab" class="tab-content" style="display:none;">

  <section id="cof_calculator">
    <h1>API 581 Level 2 ‚Äì Consequence of Failure Calculator</h1>

    <!-- ================= Storage / Operating ================= -->
    <section class="card">
      <h2>Storage / Operating Conditions</h2>
      <div class="grid">
        <label>Storage Pressure, Ps (bar abs)
          <input type="number" id="cof_ps_bar" step="0.01" placeholder="e.g. 15" />
        </label>
        <label>Storage Temperature, Ts (¬∞C)
          <input type="number" id="cof_ts_c" step="0.1" placeholder="e.g. 35" />
        </label>
        <label>Ambient Pressure, Patm (bar abs)
          <input type="number" id="cof_patm_bar" step="0.001" value="1.013" />
        </label>
        <label>Ambient Temp, Tamb (¬∞C)
          <input type="number" id="cof_tamb_c" step="0.1" value="21" />
        </label>
        <label>Stored Phase
          <select id="cof_stored_phase">
            <option value="liquid">Liquid</option>
            <option value="vapor">Gas/Vapor</option>
            <option value="two_phase">Two-phase</option>
            <option value="supercritical">Supercritical</option>
          </select>
        </label>
        <label>Normal Boiling Point, NBP (¬∞C)
          <input type="number" id="cof_nbp_c" step="0.1" />
        </label>
      </div>
    </section>

    <!-- ================= Fluid Properties ================= -->
    <section class="card">
      <h2>Fluid Properties</h2>
      <div class="grid">
        <label>Density (liquid) œÅ<sub>l</sub> (kg/m¬≥)
          <input type="number" id="cof_rho_l" step="0.1" />
        </label>
        <label>Molecular Weight, MW (kg/kmol)
          <input type="number" id="cof_mw" step="0.001" />
        </label>
        <label>Specific Heat Ratio, k (= Cp/Cv)
          <input type="number" id="cof_k_ratio" step="0.001" />
        </label>
        <label>Autoignition Temp, AIT (¬∞C)
          <input type="number" id="cof_ait_c" step="0.1" />
        </label>
      </div>
    </section>

    <!-- ================= Geometry & Inventory ================= -->
    <section class="card">
      <h2>Release Geometry / Inventory</h2>
      <div class="grid">
        <label>Hole Diameter d<sub>n</sub> (mm)
          <input type="number" id="cof_dn_mm" step="0.1" />
        </label>
        <label>Component ID D (mm)
          <input type="number" id="cof_D_mm" step="0.1" />
        </label>
        <label>Discharge Coefficient C<sub>d</sub>
          <input type="number" id="cof_cd" step="0.01" value="1.0" />
        </label>
        <label>Viscosity Factor K<sub>v</sub>
          <input type="number" id="cof_kv" step="0.001" value="1.0" />
        </label>
        <label>Inventory Group Mass (kg)
          <input type="number" id="cof_inv_group_mass" step="0.1" />
        </label>
        <label>Isolation + Detection Time (s)
          <input type="number" id="cof_iso_time_s" step="1" value="600" />
        </label>
        <label>Detection / Isolation Effectiveness (0‚Äì1)
          <input type="number" id="cof_detect_eff" step="0.01" min="0" max="1" value="1.0" />
          <small class="hint">multiplies isolation time (e.g. 0.5 ‚Üí half the isolation time)</small>
        </label>
        <label>Release Type
          <select id="cof_release_type">
            <option value="auto">Auto (decide by duration)</option>
            <option value="continuous">Continuous</option>
            <option value="instant">Instantaneous</option>
          </select>
        </label>
        <label>Flash Fraction (0‚Äì1)
          <input type="number" id="cof_flash_frac" step="0.01" value="0.0" />
        </label>
      </div>
    </section>

    <!-- ================= Outcome Coefficients ================= -->
    <section class="card">
      <h2>Outcome Model Coefficients</h2>
      <p class="hint">CA = a¬∑rate·µá (continuous) or CA = c¬∑mass·µà (instantaneous). Enter API 581 table values.</p>
      <div class="grid grid-2">
        <div>
          <h3>Continuous (a¬∑rate·µá)</h3>
          <label>a_flash <input type="number" id="cof_a_flash" /></label>
          <label>b_flash <input type="number" id="cof_b_flash" /></label>
          <label>a_jet <input type="number" id="cof_a_jet" /></label>
          <label>b_jet <input type="number" id="cof_b_jet" /></label>
          <label>a_pool <input type="number" id="cof_a_pool" /></label>
          <label>b_pool <input type="number" id="cof_b_pool" /></label>
          <label>a_vce <input type="number" id="cof_a_vce" /></label>
          <label>b_vce <input type="number" id="cof_b_vce" /></label>
        </div>
        <div>
          <h3>Instantaneous (c¬∑mass·µà)</h3>
          <label>c_flash <input type="number" id="cof_c_flash" /></label>
          <label>d_flash <input type="number" id="cof_d_flash" /></label>
          <label>c_jet <input type="number" id="cof_c_jet" /></label>
          <label>d_jet <input type="number" id="cof_d_jet" /></label>
          <label>c_pool <input type="number" id="cof_c_pool" /></label>
          <label>d_pool <input type="number" id="cof_d_pool" /></label>
          <label>c_vce <input type="number" id="cof_c_vce" /></label>
          <label>d_vce <input type="number" id="cof_d_vce" /></label>
        </div>
      </div>

      <div class="grid">
        <label>Flash-fire equipment-damage fraction
          <input type="number" id="cof_flash_area_fraction" step="0.01" value="0.25" />
        </label>
      </div>
    </section>

    <!-- ================= Auto Ignition ================= -->
    <section class="card">
      <h2>Ignition Probability (auto)</h2>
      <p class="hint">Adjust coefficients for API 581 Eqns. p<sub>ign</sub> is auto-calculated.</p>
      <div class="grid">
        <label>Ignition scale k1 <input type="number" id="cof_ign_k1" step="0.001" value="0.02" /></label>
        <label>Ignition exponent k2 <input type="number" id="cof_ign_k2" step="0.001" value="1.0" /></label>
        <label>AIT sensitivity k3 <input type="number" id="cof_ign_k3" step="1" value="50" /></label>
        <label>Late ignition min fraction <input type="number" id="cof_late_min" step="0.01" value="0.25" /></label>
        <label>Late ignition max fraction <input type="number" id="cof_late_max" step="0.01" value="0.75" /></label>
      </div>
    </section>

    <!-- ================= Toxic + Non-Flammable + Financial ================= -->
    <section class="card">
      <h2>Toxic, Non-Flammable & Financial Parameters</h2>
      <div class="grid">
        <label>Toxic coeff a (continuous) <input type="number" id="cof_tox_a" /></label>
        <label>Toxic coeff b (continuous) <input type="number" id="cof_tox_b" /></label>
        <label>Toxic coeff c (instant) <input type="number" id="cof_tox_c" /></label>
        <label>Toxic coeff d (instant) <input type="number" id="cof_tox_d" /></label>

        <label>Non-Flammable coeff a (continuous) <input type="number" id="cof_non_a" /></label>
        <label>Non-Flammable coeff b (continuous) <input type="number" id="cof_non_b" /></label>
        <label>Non-Flammable coeff c (instant) <input type="number" id="cof_non_c" /></label>
        <label>Non-Flammable coeff d (instant) <input type="number" id="cof_non_d" /></label>

        <label>Equipment Damage Cost ($/m¬≤) <input type="number" id="cof_cost_equipment" value="1000" /></label>
        <label>Injury/Fatality Cost ($/m¬≤) <input type="number" id="cof_cost_injury" value="5000" /></label>
        <label>Production Loss Cost ($/m¬≤) <input type="number" id="cof_cost_production" value="2000" /></label>
      </div>
    </section>

    <!-- ================= Actions + Results ================= -->
    <section class="actions">
      <button id="cof_calcBtn">Calculate COF</button>
      <button id="cof_resetBtn" class="secondary">Reset</button>
    </section>

    <section class="card">
      <h2>Results</h2>
      <pre id="cof_output">Press "Calculate COF"</pre>
    </section>

  </section> <!-- end of cof_calculator -->

</div> <!-- end of cof_calculatorTab -->





<!-- ‚úÖ Internal Corrosion Calculator -->
<!-- ‚úÖ Corrosion Calculation Tab -->
<div id="CORROSION_CALCULATIONTab" class="tab-content">

  <!-- ‚úÖ Wrapper -->
  <div class="rbi-dashboard">

    <h1>Semi-Quantitative</h1>

    <!-- External Corrosion Row -->
    <div class="dashboard-row">
      <div class="summary-box">
        <h3>Degradation Mechanism</h3>
        <div class="summary-value">
          <span class="link-btn" onclick="openModal('external')">External Corrosion</span>
        </div>
      </div>
      <div class="summary-box">
        <h3>Damage Factor</h3>
        <div id="ext_damageFactorBox" class="summary-value"></div>
      </div>
      <div class="summary-box">
        <h3>Probability Category</h3>
        <div id="ext_probabilityBox" class="summary-value"></div>
      </div>
    </div>

    <!-- Internal Corrosion Row -->
    <div class="dashboard-row">
      <div class="summary-box">
        <h3>Degradation Mechanism</h3>
        <div class="summary-value">
          <span class="link-btn" onclick="openModal('internal')">Internal Corrosion</span>
        </div>
      </div>
      <div class="summary-box">
        <h3>Damage Factor</h3>
        <div id="int_damageFactorBox" class="summary-value"></div>
      </div>
      <div class="summary-box">
        <h3>Probability Category</h3>
        <div id="int_probabilityBox" class="summary-value"></div>
      </div>
    </div>

    <!-- ‚úÖ Consequence Evaluation Row -->
  <div class="dashboard-row">
  <div class="summary-box">
    <h3>Evaluation</h3>
    <div class="summary-value">
      <span class="link-btn" onclick="openModal('consequence')">Consequence Evaluation</span>
    </div>
  </div>
  <div class="summary-box">
    <h3>Flammable Consequence Category</h3>
    <div id="cons_flameCatBox" class="summary-value"></div>
  </div>
  <div class="summary-box">
    <h3>Toxic Consequence Category</h3>
    <div id="cons_toxicCatBox" class="summary-value"></div>
  </div>
</div>

    <!-- External Modal -->
    <div id="externalModal" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeModal('external')">&times;</span>
        <h2>External Corrosion Probability Calculator</h2>

        <div class="grid-container">
          <div class="form-group">
            <label for="ext_years">Years in Service</label>
            <input type="number" id="ext_years" placeholder="Enter years in service">
          </div>

          <div class="form-group">
            <label for="ext_temp">Operating Temperature (¬∞C)</label>
            <input type="number" id="ext_temp" placeholder="Enter temperature">
          </div>

          <div class="form-group">
            <label for="ext_cr">Corrosion Rate (mm/yr)</label>
            <input type="number" step="0.01" id="ext_cr" placeholder="Enter CR">
          </div>

          <div class="form-group">
            <label for="ext_humidity">Humidity Level</label>
            <select id="ext_humidity">
              <option value="">-- Select --</option>
              <option value="1.0">High</option>
              <option value="0.5">Medium</option>
              <option value="0.25">Low</option>
            </select>
          </div>

          <div class="form-group">
            <label for="ext_coating">Coating Type</label>
            <select id="ext_coating">
              <option value="">-- Select --</option>
              <option value="1">None (1 yr)</option>
              <option value="5">Average (5 yr)</option>
              <option value="10">Best (10 yr)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="ext_insType">Insulation Type</label>
            <select id="ext_insType">
              <option value="">-- Select --</option>
              <option value="1">Non-Insulated</option>
              <option value="1.5">Asbestos</option>
              <option value="1.0">Calcium Silicate (Not Cl Free)</option>
              <option value="0.75">Mineral Wool / Cl Free</option>
              <option value="0.5">Foam / Glass</option>
            </select>
          </div>

          <div class="form-group">
            <label for="ext_insCond">Insulation Condition</label>
            <select id="ext_insCond">
              <option value="">-- Select --</option>
              <option value="1">Not Applicable (Non-Insulated)</option>
              <option value="1.5">Poor</option>
              <option value="1.0">Fair</option>
              <option value="0.5">Good</option>
            </select>
          </div>

          <div class="form-group">
            <label for="ext_cooling">Near Cooling Tower?</label>
            <select id="ext_cooling">
              <option value="">-- Select --</option>
              <option value="2">Yes</option>
              <option value="1">No</option>
            </select>
          </div>

          <div class="form-group">
            <label for="ext_tInit">Initial Thickness (mm)</label>
            <input type="number" step="0.1" id="ext_tInit" placeholder="Enter initial thickness">
          </div>

          <div class="form-group">
            <label for="ext_tMin">Min Thickness (mm)</label>
            <input type="number" step="0.1" id="ext_tMin" placeholder="Enter min thickness">
          </div>

          <div class="form-group">
            <label for="ext_numInsp">Number of Inspections</label>
            <input type="number" id="ext_numInsp" placeholder="Enter number of inspections">
          </div>

          <div class="form-group">
            <label for="ext_inspConf">Inspection Confidence</label>
            <select id="ext_inspConf">
              <option value="">-- Select --</option>
              <option value="L">Low</option>
              <option value="M">Medium</option>
              <option value="H">High</option>
              <option value="VH">Very High</option>
            </select>
          </div>
        </div>

        <button onclick="calculateExternal()">Calculate</button>
        <div class="result" id="ext_results"></div>
      </div>
    </div>

    <!-- Internal Modal -->
    <div id="internalModal" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeModal('internal')">&times;</span>
        <h2>Internal Corrosion Probability Calculator</h2>

        <div class="grid-container">
          <div class="form-group">
            <label for="int_years">Years in Service</label>
            <input type="number" id="int_years" placeholder="Enter years in service">
          </div>
          <div class="form-group">
            <label for="int_cr">Corrosion Rate (mm/yr)</label>
            <input type="number" id="int_cr" placeholder="Enter corrosion rate">
          </div>
          <div class="form-group">
            <label for="int_tNom">Nominal Thickness (mm)</label>
            <input type="number" id="int_tNom" placeholder="Enter nominal thickness">
          </div>
          <div class="form-group">
            <label for="int_tReq">Required Thickness (mm)</label>
            <input type="number" id="int_tReq" placeholder="Enter required thickness">
          </div>
          <div class="form-group">
            <label for="int_numInsp">Number of Inspections</label>
            <input type="number" id="int_numInsp" placeholder="Enter number of inspections">
          </div>
          <div class="form-group">
            <label for="int_inspConf">Inspection Confidence</label>
            <select id="int_inspConf">
              <option value="">-- Select --</option>
              <option value="L">Low</option>
              <option value="M">Medium</option>
              <option value="H">High</option>
              <option value="VH">Very High</option>
            </select>
          </div>
        </div>

        <button onclick="calculateInternal()">Calculate</button>
        <div class="result" id="int_results"></div>
      </div>
    </div>

     <!-- ‚úÖ Consequence Modal -->
    <div id="consequenceModal" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeModal('consequence')">&times;</span>
        <h2>Consequence Evaluation Calculator</h2>

        <div class="grid-container">
          <div class="form-group">
            <label>Initial Fluid Phase</label>
            <select id="cons_phase">
              <option value="liquid">Liquid</option>
              <option value="gas">Gas</option>
            </select>
          </div>

          <div class="form-group">
            <label>Operating Pressure (kg/cm¬≤)</label>
            <input type="number" id="cons_pressure" value="3.5" step="any">
          </div>

          <div class="form-group">
            <label>Fluid Density (lb/ft¬≥)</label>
            <input type="number" id="cons_density" value="50" step="any">
          </div>

          <div class="form-group">
            <label>Inventory (kg)</label>
            <input type="number" id="cons_inventory" value="12268" step="any">
          </div>

          <div class="form-group">
            <label>Leak Size (equipment)</label>
            <select id="cons_equipment">
              <option value="0.049">¬Ω" Pipe (0.049 in¬≤)</option>
              <option value="0.442">4" Pipe (0.442 in¬≤)</option>
              <option value="7.070">60" Pipe (7.070 in¬≤)</option>
              <option value="19.640">Reactor (19.640 in¬≤)</option>
              <option value="314.200">Storage Tank (314.200 in¬≤)</option>
            </select>
          </div>

          <div class="form-group">
            <label>Detection Time (min)</label>
            <input type="number" id="cons_detect" value="10">
          </div>

          <div class="form-group">
            <label>Isolation Time (min)</label>
            <input type="number" id="cons_isolate" value="8">
          </div>

          <div class="form-group">
            <label>Toxic Fluid</label>
            <select id="cons_toxicFluid">
              <option value="none">None</option>
              <option value="H2S">H‚ÇÇS</option>
              <option value="NH3">NH‚ÇÉ</option>
            </select>
          </div>

          <div class="form-group">
            <label>Percent Toxic (weight %)</label>
            <input type="number" id="cons_percentToxic" value="100">
          </div>

          <div class="form-group">
            <label>Toxic Leak Type</label>
            <select id="cons_toxicType">
              <option value="none">None</option>
              <option value="catastrophic">Catastrophic Loss</option>
              <option value="utility">Utility Leak</option>
              <option value="process">Process Leak</option>
              <option value="toxicSystem">Toxic System Leak</option>
            </select>
          </div>

          <div class="form-group">
            <label>Leak Rate Category</label>
            <select id="cons_leakRateCat">
              <option value="major">Major</option>
              <option value="minor">Minor</option>
            </select>
          </div>

          <div class="form-group">
            <label>Lost Product Value (USD)</label>
            <input type="number" id="cons_lostValue" value="500000">
          </div>
        </div>

        <button onclick="calculateConsequence()">Calculate</button>
        <div class="result" id="cons_results"></div>
      </div>
    </div>



     <!-- ‚úÖ Calculate Risk Matrix Button -->
   <!-- ‚úÖ Calculate Risk Matrix Button -->
<div style="text-align:center; margin-top:20px;">
  <button onclick="calculateRiskMatrix()">Calculate Risk Matrix</button>
</div>

<!-- ‚úÖ Risk Matrix Section (Initially Hidden) -->
<div id="riskMatrixSection" style="display:none; margin-top:30px;">
  <h3>üìä Risk Matrix</h3>
  <table class="risk-matrix">
    <thead>
      <tr>
        <th>POF \ COF</th>
        <th>A</th>
        <th>B</th>
        <th>C</th>
        <th>D</th>
        <th>E</th>
      </tr>
    </thead>
    <tbody>
  <tr><td>5</td>
    <td id="cell-5-A" class="high">High</td>
    <td id="cell-5-B" class="high">High</td>
    <td id="cell-5-C" class="high">High</td>
    <td id="cell-5-D" class="extreme">Extreme</td>
    <td id="cell-5-E" class="extreme">Extreme</td>
  </tr>
  <tr><td>4</td>
    <td id="cell-4-A" class="medium">Medium</td>
    <td id="cell-4-B" class="medium">Medium</td>
    <td id="cell-4-C" class="high">High</td>
    <td id="cell-4-D" class="high">High</td>
    <td id="cell-4-E" class="extreme">Extreme</td>
  </tr>
  <tr><td>3</td>
    <td id="cell-3-A" class="low">Low</td>
    <td id="cell-3-B" class="low">Low</td>
    <td id="cell-3-C" class="medium">Medium</td>
    <td id="cell-3-D" class="high">High</td>
    <td id="cell-3-E" class="extreme">Extreme</td>
  </tr>
  <tr><td>2</td>
    <td id="cell-2-A" class="low">Low</td>
    <td id="cell-2-B" class="low">Low</td>
    <td id="cell-2-C" class="medium">Medium</td>
    <td id="cell-2-D" class="medium">Medium</td>
    <td id="cell-2-E" class="high">High</td>
  </tr>
  <tr><td>1</td>
    <td id="cell-1-A" class="low">Low</td>
    <td id="cell-1-B" class="low">Low</td>
    <td id="cell-1-C" class="medium">Medium</td>
    <td id="cell-1-D" class="medium">Medium</td>
    <td id="cell-1-E" class="high">High</td>
  </tr>
</tbody>

  </table>

  <div id="riskResult" class="risk-output"></div>
</div>

  </div> <!-- ‚úÖ Wrapper close -->

</div>
<!-- ‚úÖ Corrosion Calculation Tab End -->

  
        

<!-- ‚úÖ Toxic From -->
<div id="TOXIC_CALCULATIONTab" class="tab-content" style="display:none;">
  <section id="toxicCalculator">
    <h2>Toxic % Strict Calculator</h2>

    <!-- Calculation Type First -->
    <label for="calcType_Toxic">Calculation Type:</label>
    <select id="calcType_Toxic" onchange="toggleInputs_Toxic()">
      <option value="">--Select--</option>
      <option value="kg">Component value (kg/hr)</option>
      <option value="mol">mol% (kmol/hr)</option>
      <option value="gasComp">WT % </option> <!-- NEW OPTION -->
    </select>

    <!-- Gas select after Calculation Type -->
    <label for="toxicGas_Toxic" id="toxicGasLabel" style="display:inline-block;">Select Toxic Gas:</label>
    <select id="toxicGas_Toxic" onchange="resetCalculation_Toxic()" style="display:inline-block;">
      <option value="">--Select--</option>
      <option value="28.01">CO (Carbon Monoxide)</option>
      <option value="44.01">CO‚ÇÇ (Carbon Dioxide)</option>
      <option value="34.08">H‚ÇÇS (Hydrogen Sulfide)</option>
      <option value="64.06">SO‚ÇÇ (Sulfur Dioxide)</option>
      <option value="30.01">NO (Nitric Oxide)</option>
      <option value="46.01">NO‚ÇÇ (Nitrogen Dioxide)</option>
      <option value="70.90">Cl‚ÇÇ (Chlorine)</option>
      <option value="17.03">NH‚ÇÉ (Ammonia)</option>
      <option value="27.03">HCN (Hydrogen Cyanide)</option>
    </select>

    <!-- Inputs for kg -->
    <div id="kgInputs_Toxic" style="display:none; margin-top:10px;">
      <label for="componentKg_Toxic">Toxic Component (kg/hr):</label>
      <input type="number" id="componentKg_Toxic" placeholder="e.g., 19387.02">
    </div>

    <!-- Inputs for mol -->
    <div id="molInputs_Toxic" style="display:none; margin-top:10px;">
      <label for="molPercent_Toxic">Toxic Component mol%:</label>
      <input type="number" id="molPercent_Toxic" placeholder="e.g., 12.5226">

      <label for="totalMolarFlow_Toxic" style="margin-top:8px;">Total Molar Flow (kmol/hr):</label>
      <input type="number" id="totalMolarFlow_Toxic" placeholder="e.g., 5527.18">
    </div>

    <label for="totalMassFlow_Toxic" id="totalMassFlowLabel" style="margin-top:10px;">Total Mass Flow (kg/hr):</label>
    <input type="number" id="totalMassFlow_Toxic" placeholder="e.g., 73817.9">

    <button onclick="calculateToxic_Toxic()" id="calculateBtn" style="margin-top:15px;">Calculate</button>

    <div class="result" id="result_Toxic" style="margin-top:15px;"></div>

    <!-- NEW: Gas Composition Calculator embedded and initially hidden -->
    <section id="gasCompCalculatorSection" style="display:none; margin-top:20px; border:1px solid #ccc; padding:10px;">
      <h3>Compound input</h3>

      <div class="flex-row">
        <div>
          <label for="gasSelect">Select Compound:</label>
          <select id="gasSelect"></select>
        </div>

        <div>
          <label for="molePercent">Mole %:</label>
          <input type="number" id="molePercent" min="0" max="100" step="any" />
        </div>

        <div>
          <button id="addGasBtn">Add / Update Compound</button>
        </div>
      </div>

      <h4>Add New Compound input (with custom molar mass)</h4>
      <div class="flex-row">
        <div>
          <label for="newGasName">Compound Name (e.g. C6):</label>
          <input type="text" id="newGasName" placeholder="Compound name" />
        </div>

        <div>
          <label for="newGasMolarMass">Molar Mass (g/mol):</label>
          <input type="number" id="newGasMolarMass" min="0" step="any" placeholder="e.g. 86.18" />
        </div>

        <div>
          <button id="addNewGasBtn">Add New Compound</button>
        </div>
      </div>

      <h4>Compound List and Calculations</h4>
      <table id="gasTable" style="width:100%; margin-top:10px;">
        <thead>
          <tr>
            <th>Gas</th>
            <th>Mole % (editable)</th>
            <th>Mole Fraction</th>
            <th>Molar Mass (g/mol)</th>
            <th>Mass Contribution (g)</th>
            <th>WT %</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <!-- Rows dynamically inserted here -->
        </tbody>
      </table>

      <h4>Total Mass: <span id="totalMass">0.000</span> g</h4>

      <button id="exportCsvBtn">Export Table as CSV</button>
    </section>
  </section>
</div>


        

<!-- ‚úÖ Modal for Process Flow Diagrams -->
<div id="processFlowModal" class="modal" style="display:none; z-index: 1000;">
  <div class="modal-content fullscreen">
    <span class="close-btn" onclick="closeProcessFlowModal()">&times;</span>

    <div class="container">
      <div class="sidebar">
        <h3>Damage Mechanisms</h3>
        <ul id="dm-list">
          <li data-dm="1">1 - Sulfidation</li>
          <li data-dm="2">2 - Wet H2S Damage (Blistering/HIC/SOHIC/SSC)</li>
          <li data-dm="3">3 - Creep and Stress Rupture</li>
          <li data-dm="4">4 - High-temperature H2/H2S Corrosion</li>
          <li data-dm="5">5 - Polythionic Acid SCC</li>
          <li data-dm="6">6 - Naphthenic Acid Corrosion</li>
          <li data-dm="7">7 - Ammonium Bisulfide Corrosion</li>
          <li data-dm="8">8 - Ammonium Chloride Corrosion</li>
          <li data-dm="9">9 - HCL Corrosion</li>
          <li data-dm="10">10 - High-temperature Hydrogen Attack</li>
          <li data-dm="16">16 - Temper Embrittlement</li>
          <li data-dm="20">20 - Erosion/Erosion-Corrosion</li>
          <li data-dm="22">22 - Amine SCC</li>
          <li data-dm="23">23 - Chloride SCC</li>
          <li data-dm="25">25 - Hydrogen Embrittlement</li>
          <li data-dm="30">30 - Short-term Overheating‚ÄîStress Rupture</li>
          <li data-dm="31">31 - Brittle Fracture</li>
          <li data-dm="32">32 - Sigma Phase Embrittlement</li>
          <li data-dm="35">35 - Stress Relaxation Cracking</li>
          <li data-dm="45">45 - Amine Corrosion</li>
          <li data-dm="46">46 - Corrosion Under Insulation</li>
        </ul>
      </div>

      <div class="drawing">
        <div id="showDetailsMsg" onclick="openDetailsModal()">üîç Show Details</div>
        <div id="svgContainer"></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚úÖ Modal for Show Details -->
<div id="detailsModal" class="modal" style="display: none; z-index: 2000;">
  <div class="modal-content" id="detailsModalContent">
    <span class="close-btn" onclick="closeDetailsModal()">&times;</span>
    <div id="detailsContent">
      <!-- Damage Mechanism Description will load here -->
      <p><strong>Example:</strong> Sulfidation is caused by ...</p>
    </div>
  </div>
</div>

<!-- ‚úÖ Modal for CDU / VDU -->
<div id="cduVduModal" class="modal" style="display:none; z-index: 1000;">
  <div class="modal-content fullscreen">
    <span class="close-btn" onclick="closeCDUVDUModal()">&times;</span>

    <div class="container">
      <div class="sidebar">
        <h3>Damage Mechanisms (CDU / VDU)</h3>
        <ul id="cduvdu-dm-list">
          
  <li data-dm="1">1 - Sulfidation</li>
  <li data-dm="2">2 - Wet H2S Damage (Blistering/HIC/SOHIC/SSC)</li>
  <li data-dm="3">3 - Creep and Stress Rupture</li>
  <li data-dm="5">5 - Polythionic Acid SCC</li>
  <li data-dm="6">6 - Naphthenic Acid Corrosion</li>
  <li data-dm="8">8 - Ammonium Chloride Corrosion</li>
  <li data-dm="9">9 - HCL Corrosion</li>
  <li data-dm="11">11 - Oxidation</li>
  <li data-dm="18">18 - Caustic SCC</li>
  <li data-dm="19">19 - Caustic Corrosion</li>
  <li data-dm="20">20 - Erosion/Erosion-Corrosion</li>
  <li data-dm="23">23 - Chloride SCC</li>
  <li data-dm="30">30 - Short-term Overheating ‚Äî Stress Rupture</li>
  <li data-dm="33">33 - 475¬∞C Embrittlement</li>
  <li data-dm="39">39 - Dissimilar Metal Weld Cracking</li>
  <li data-dm="42">42 - CO2 Corrosion</li>
  <li data-dm="44">44 - Fuel Ash Corrosion</li>
  <li data-dm="48">48 - Ammonia SCC</li>
  <li data-dm="52">52 - Liquid Metal Embrittlement</li>
  <li data-dm="66">66 - Aqueous Organic Acid Corrosion</li>
  <li data-dm="67">67 - Brine Corrosion</li>
          <!-- ‚úÖ You can add more as per CDU/VDU -->
        </ul>
      </div>

      <div class="drawing">
        <div id="cduvdu-showDetailsMsg" onclick="openCDUVDUDetailsModal()">üîç Show Details</div>
        <div id="cduvdu-svgContainer"></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚úÖ Modal for CDU / VDU Show Details -->
<div id="cduvdu-detailsModal" class="modal" style="display:none; z-index: 2000;">
  <div class="modal-content" id="cduvdu-detailsModalContent">
    <span class="close-btn" onclick="closeCDUVDUDetailsModal()">&times;</span>
    <div id="cduvdu-detailsContent">
      <!-- CDU / VDU Damage Mechanism Description will load here -->
      <p><strong>Example:</strong> Naphthenic Acid Corrosion is caused by ...</p>
    </div>
  </div>
</div>


        <!-- ‚úÖ MSP Modal -->
<div id="mspModal" class="modal" style="display:none; z-index: 1000;">
  <div class="modal-content fullscreen">
    <span class="close-btn" onclick="closeMSPModal()">&times;</span>

    <div class="container">
      <div class="sidebar">
        <h3>Damage Mechanisms (MSP)</h3>
        <ul id="msp-dm-list">
          <li data-dm="3">3 - Creep/Stress Rupture</li>
          <li data-dm="8">8 - Ammonium Chloride Corrosion</li>
          <li data-dm="9">9 - HCL Corrosion</li>
          <li data-dm="10">10 - High Temperature Hydrogen Attack</li>
          <li data-dm="11">11 - Oxidation</li>
          <li data-dm="16">16 - Temper Embrittlement</li>
          <li data-dm="20">20 - Erosion/Erosion-Corrosion</li>
          <li data-dm="24">24 - Curburization</li>
          <li data-dm="25">25 - Hydrogen Embrittlement</li>
          <li data-dm="30">30 - Short Term Overheating/Stress Rupture</li>
          <li data-dm="35">35 - Stress Relaxation Cracking</li>
          <li data-dm="49">49 - Ammonia SCC</li>
          <li data-dm="51">51 - Mechanical Fatigue</li>
          <li data-dm="59">59 - Metal Dusting</li>
          <!-- ‚úÖ Tum apne hisab se aur add kar sakte ho -->
        </ul>
      </div>

      <div class="drawing">
        <div id="msp-showDetailsMsg" onclick="openMSPDetailsModal()">üîç Show Details</div>
        <div id="msp-svgContainer"></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚úÖ MSP Details Modal -->
<div id="msp-detailsModal" class="modal" style="display:none; z-index: 2000;">
  <div class="modal-content">
    <span class="close-btn" onclick="closeMSPDetailsModal()">&times;</span>
    <div id="msp-detailsContent">
      <p><strong>Example:</strong> High Temperature Sulfidation is caused by ...</p>
    </div>
  </div>
</div>


       <!-- ‚úÖ Modal for H2U -->
<div id="h2uModal" class="modal" style="display:none; z-index: 1000;">
  <div class="modal-content fullscreen">
    <span class="close-btn" onclick="closeH2UModal()">&times;</span>

    <div class="container">
      <div class="sidebar">
        <h3>Damage Mechanisms (H2U)</h3>
        <ul id="h2u-dm-list">
          <li data-dm="3">3 - CREEP/STRESS RUPTURE</li>
          <li data-dm="10">10 - HIGH TEMPERATURE HYDROGEN ATTACK</li>
          <li data-dm="11">11 - OXIDATION</li>
          <li data-dm="5">5 - Sulfidation</li>
          <li data-dm="12">12 - THERMAL FATIGUE</li>
          <li data-dm="14">14 - REFRACTORY DEGRADATION</li>
          <li data-dm="16">16 - TEMPER EMBRITTLEMENT</li>
          <li data-dm="11">11 - CARBONATE SSC</li>
          <li data-dm="21">21 - Polythionic Acid SCC</li>
          <li data-dm="22">22 - AMINE SSC</li>
          <li data-dm="23">23 - CHLORIDE SSC</li>
          <li data-dm="26">26 - STEAM BLANKETING --- SEE 30</li>
          <li data-dm="27">27 - THERMAL SHOCK</li>
          <li data-dm="30">30 - SHORT TERM OVERHEATING - STRESS RUPTURE</li>
          <li data-dm="32">32 - SIGMA PHASE EMBRITTLEMENT</li>
          <li data-dm="35">35 - STRESS RELAXATION CRACKING</li>
          <li data-dm="39">39 - DISSIMILAR METAL WELD (DMW) CRACKING</li>
          <li data-dm="42">42 - CO2 CORROSION</li>
          <li data-dm="45">45 - AMINE CORROSION</li>
          <li data-dm="50">50 - BOILER WATER/CONDENSATE CORROSION</li>
          <li data-dm="59">59 - METAL DUSTING</li>
          <!-- ‚úÖ Add/Modify as per actual H2U mechanisms -->
        </ul>
      </div>

      <div class="drawing">
        <div id="h2u-showDetailsMsg" onclick="openH2UDetailsModal()">üîç Show Details</div>
        <div id="h2u-svgContainer"></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚úÖ Modal for H2U Show Details -->
<div id="h2u-detailsModal" class="modal" style="display:none; z-index: 2000;">
  <div class="modal-content" id="h2u-detailsModalContent">
    <span class="close-btn" onclick="closeH2UDetailsModal()">&times;</span>
    <div id="h2u-detailsContent">
      <!-- H2U Damage Mechanism Description will load here -->
      <p><strong>Example:</strong> High Temperature Hydrogen Attack (HTHA) occurs due to ...</p>
    </div>
  </div>
</div>

        
      <!-- ‚úÖ ASME B31.3 Thickness Calculator Tab --> <div class="tab-content" id="ASMEB31_3Tab" style="display: none;">  
  <h2>Process Piping Thickness Calculator</h2> <!-- üîπ Row 1: Design Pressure + Unit --> <div class="b313-row">  
    <div class="b313-col">  
      <label for="b313_pressure">Design Pressure (P):</label>  
      <input type="number" id="b313_pressure" step="0.01" placeholder="Enter Pressure">  
    </div>  
    <div class="b313-col">  
      <label>Unit:</label>  
<select id="b313_pressureUnit">  
  <option value="">-- Select Unit --</option>  
  <option value="MPa">MPa</option>  
  <option value="kgcm2">kg/cm¬≤</option>  
  <option value="bar">bar</option>  
  <option value="psi">psi</option>  
</select> </div>

  </div> <!-- üîπ Row 2: Allowable Stress + Unit --> <div class="b313-row">  
    <div class="b313-col">  
      <label for="b313_stress">Allowable Stress (S):</label>  
      <input type="number" id="b313_stress" step="0.1" placeholder="Enter Stress">  
    </div>  
    <div class="b313-col">  
      <label>Unit:</label>  
<select id="b313_stressUnit">  
  <option value="">-- Select Unit --</option>  
  <option value="MPa">MPa</option>  
  <option value="ksi">ksi</option>  
  <option value="kgcm2">kg/cm¬≤</option>  
  <option value="psi">psi</option>  
</select> </div>

  </div> 
        <!-- üîπ Row 3: Outside Diameter + Weld Efficiency -->
        <!-- üîπ Row 3: Outside Diameter + Weld Efficiency -->
<div class="b313-row">  

  <!-- OD Dropdown -->
  <div class="b313-col">  
    <label for="b313_diameter">Nominal Pipe Size(NPS):</label>  
    <select id="b313_diameter">  
  <option value="">-- Select OD Size --</option>  

  <!-- Small Bores -->
  <option value="21.3">NPS 1/2" - 21.3 mm</option>  
  <option value="26.7">NPS 3/4" - 26.7 mm</option>  
  <option value="33.4">NPS 1" - 33.4 mm</option>  
  <option value="42.2">NPS 1 1/4" - 42.2 mm</option>  
  <option value="48.3">NPS 1 1/2" - 48.3 mm</option>  
  <option value="60.3">NPS 2" - 60.3 mm</option>  
  <option value="73.0">NPS 2 1/2" - 73.0 mm</option>  
  <option value="88.9">NPS 3" - 88.9 mm</option>  
  <option value="101.6">NPS 3 1/2" - 101.6 mm</option>  
  <option value="114.3">NPS 4" - 114.3 mm</option>  
  <option value="141.3">NPS 5" - 141.3 mm</option>  
  <option value="168.3">NPS 6" - 168.3 mm</option>  

  <!-- Medium Sizes -->
  <option value="219.1">NPS 8" - 219.1 mm</option>  
  <option value="273.0">NPS 10" - 273.0 mm</option>  
  <option value="323.9">NPS 12" - 323.9 mm</option>  
  <option value="355.6">NPS 14" - 355.6 mm</option>  
  <option value="406.4">NPS 16" - 406.4 mm</option>  
  <option value="457.0">NPS 18" - 457.0 mm</option>  
  <option value="508.0">NPS 20" - 508.0 mm</option>  
  <option value="559.0">NPS 22" - 559.0 mm</option>  
  <option value="610.0">NPS 24" - 610.0 mm</option>  

  <!-- Large Bores -->
  <option value="660.4">NPS 26" - 660.4 mm</option>  
  <option value="711.2">NPS 28" - 711.2 mm</option>  
  <option value="762.0">NPS 30" - 762.0 mm</option>  
  <option value="812.8">NPS 32" - 812.8 mm</option>  
  <option value="863.6">NPS 34" - 863.6 mm</option>  
  <option value="914.4">NPS 36" - 914.4 mm</option>  
  <option value="965.2">NPS 38" - 965.2 mm</option>  
  <option value="1016.0">NPS 40" - 1016.0 mm</option>  
  <option value="1066.8">NPS 42" - 1066.8 mm</option>  
  <option value="1117.6">NPS 44" - 1117.6 mm</option>  
  <option value="1168.4">NPS 46" - 1168.4 mm</option>  
  <option value="1219.2">NPS 48" - 1219.2 mm</option>  
    </select>
  </div>  
  
    <div class="b313-col">  
      <label for="b313_efficiency">Weld Joint Efficiency (E):</label>  
<select id="b313_efficiency">  
  <option value="">-- Select Efficiency --</option>  
  <option value="1.0">Seamless / 100% RT (1.00)</option>  
  <option value="0.95">Double Butt Welded (0.95)</option>  
  <option value="0.90">Spot RT (0.90)</option>  
  <option value="0.85">ERW Not RT (0.85)</option>  
  <option value="0.80">Single Butt Seam (0.80)</option>  
  <option value="0.60">Furnace Butt Welded (0.60)</option>  
</select> </div>

  </div> <!-- üîπ Row 4: Y Material + Y Factor --> <div class="b313-row">  
    <div class="b313-col">  
      <label for="b313_yMaterial">Y Factor Material:</label>  
      <select id="b313_yMaterial" onchange="updateYDropdown()">  
        <option value="">-- Select Material --</option>  
        <option value="ferritic">Ferritic Steel</option>  
        <option value="austenitic">Austenitic Stainless Steel</option>  
        <option value="nickel">Nickel Alloy</option>  
        <option value="grayiron">Gray Iron</option>  
        <option value="other">Other Ductile Metals</option>  
      </select>  
    </div>  
    <div class="b313-col">  
      <label for="b313_yFactor">Y Factor (Design Temperature):</label>  
      <select id="b313_yFactor">  
        <option value="">-- Select Temperature --</option>  
      </select>  
    </div>  
  </div> 

        <!-- üîπ Row 5: High Temp Service + Corrosion Allowance Toggle -->
<div class="b313-row">
  <div class="b313-col">
    <label for="b313_highTemp">High-Temperature Service?</label>
    <select id="b313_highTemp" onchange="toggleWeldFactor()">
      <option value="no">No</option>
      <option value="yes">Yes (T > 427¬∞C)</option>
    </select>

    <!-- üîπ Weld Strength Reduction Factor -->
    <div id="b313_weldFactorSection" class="hidden" style="margin-top: 8px;">
      <label for="b313_wFactor">Weld Strength Reduction Factor (W):</label>
      <select id="b313_wFactor">
        <option value="1.0">‚â§427¬∞C ‚Äî W = 1.00</option>
        <option value="0.95">454¬∞C ‚Äî W = 0.95</option>
        <option value="0.91">482¬∞C ‚Äî W = 0.91</option>
        <option value="0.88">510¬∞C ‚Äî W = 0.88</option>
        <option value="0.85">538¬∞C ‚Äî W = 0.85</option>
        <option value="0.82">566¬∞C ‚Äî W = 0.82</option>
        <option value="0.78">593¬∞C ‚Äî W = 0.78</option>
        <option value="0.75">621¬∞C ‚Äî W = 0.75</option>
        <option value="0.72">649¬∞C ‚Äî W = 0.72</option>
        <option value="0.70">677¬∞C ‚Äî W = 0.70</option>
      </select>
    </div>
  </div>

  <div class="b313-col">
    <label for="b313_includeCA">Include Corrosion Allowance?</label>
    <select id="b313_includeCA" onchange="toggleCABox()">
      <option value="" selected>--Select--</option>
      <option value="no">No</option>
      <option value="yes">Yes</option>
    </select>
  </div>
</div>

<!-- üîπ Row 6: Corrosion Allowance (Hidden Until "Yes") -->
<div id="b313_caBox" class="b313-row hidden">
  <div class="b313-col">
    <label for="b313_corrosion">Corrosion Allowance (CA) [mm]:</label>
    <input type="number" id="b313_corrosion" value="3.0" step="0.1">
  </div>
</div>

        <!-- üîπ Mill Tolerance Section -->
<div class="b313-row">
  <div class="b313-col">
    <label for="b313_includeMillTol">Include Mill Tolerance?</label>
    <select id="b313_includeMillTol" onchange="toggleMillToleranceSection()">
      <option value="">--Select--</option>
      <option value="no">No</option>
      <option value="yes">Yes</option>
    </select>
  </div>
</div>

<!-- üîπ Mill Tolerance Fields -->
<div id="b313_millTolSection" class="b313-row hidden">
  <div class="b313-col">
    <label for="b313_nomThickness">Nominal Thickness (mm):</label>
    <input type="number" id="b313_nomThickness" step="0.1">
  </div>

 <div class="b313-col">
  <label for="b313_materialStd">Material Standard:</label>
  <select id="b313_materialStd" onchange="loadMillTolerance()">
    <option value="">--Select--</option>

    <!-- ‚úÖ ASME / ASTM Standards -->
    <option value="A53">A53</option>
    <option value="A106">A106</option>
    <option value="A134">A134</option>
    <option value="A135/A135M">A135/A135M</option>
    <option value="A312">A312</option>
    <option value="A358/A358M">A358/A358M</option>
    <option value="A409/A409M">A409/A409M</option>
    <option value="A451">A451</option>
    <option value="A524">A524</option>
    <option value="A530">A530</option>
    <option value="A587">A587</option>
    <option value="A600/A600M">A600/A600M</option>
    <option value="A671/A671M">A671/A671M</option>
    <option value="A672/A672M">A672/A672M</option>
    <option value="A691/A691M">A691/A691M</option>
    <option value="A731">A731</option>
    <option value="A790">A790</option>
    
    

    <!-- ‚úÖ API 5L (Special Logic) -->
    <option value="API 5L (Seamless)">API 5L (Seamless)</option>
    <option value="API 5L (Welded Pipe)">API 5L (Welded Pipe)</option>

    <!-- ‚úÖ IS Standards -->
    <option value="IS-3589 (SAW & Seamless Pipe)">IS-3589 (SAW & Seamless Pipe)</option>
    <option value="IS-3589 (ERW Pipe)">IS-3589 (ERW Pipe)</option>
    <option value="IS-1239 (Welded: Light Tubes)">IS-1239 (Welded: Light Tubes)</option>
    <option value="IS-1239 (Welded: Medium/Heavy)">IS-1239 (Welded: Medium/Heavy)</option>
    <option value="IS-1239 (Seamless)">IS-1239 (Seamless)</option>
  </select>
</div>


  <div class="b313-col">
  <label>Auto Mill Tolerance:</label>
<input type="text" id="b313_autoMillTol" readonly class="readonly-field">
</div>


  <!-- ‚úÖ Hidden Input for JS Calculation -->
  <input type="hidden" id="b313_millTolerance">
</div>

    <!-- üîπ Calculate Button -->
        <button type="button" class="calculate-btn" onclick="calculateThickness()">Calculate</button>
        
<!-- ‚úÖ Spinner (Unique Classes) -->
<div id="b313_spinner" class="b313-hidden">
  <div class="b313-loader"></div>
  <p>Calculating...</p>
</div>
        
  <!-- üîπ Result Output (Now below the button) -->
        <div class="b313-row">  
    <div class="b313-col">  
      <label>Required Thickness:</label>  
      <div id="b313_resultBox" class="result">--</div>  
    </div>  
  </div>  
</div>  

      <!-- ‚úÖ ASME Section VIII Div. 1 Thickness Calculator Tab -->
<div class="tab-content" id="ASMESECTIONVIIIDIV1Tab" style="display: none;">
  <h1>Pressure Vessel ‚Äì Shell & Head Thickness Calculator</h1>

  <!-- Component Type Selection -->
  <label>Select Type:</label>
  <select id="typeSelector" onchange="updateASMEForm()">
    <option value="" disabled selected>-- Select Component Type --</option>
    <option value="shell">Shell</option>
    <option value="ellipsoidal">Ellipsoidal Head</option>
    <option value="torispherical">Torispherical Head</option>
    <option value="hemispherical">Hemispherical Head</option>
  </select>

  <!-- ‚úÖ SHELL FORM -->
  <div id="shellForm" class="form-section" style="display: none;">
  <h3>Cylindrical Shell Inputs:</h3>

  <!-- ‚úÖ Row 1: P & S -->
  <div class="input-grid">
    <div>
      <label>Internal Pressure (P)</label>
      <input type="number" id="pressure" step="0.01" />
    </div>
    <div>
      <label>Unit</label>
      <select id="pressureUnit">
        <option value="MPa">MPa</option>
        <option value="bar">bar</option>
        <option value="kgcm2">kg/cm¬≤</option>
        <option value="psi">psi</option>
      </select>
    </div>
    <div>
      <label>Design Stress (S)</label>
      <input type="number" id="stress" step="0.01" />
    </div>
    <div>
      <label>Unit</label>
      <select id="stressUnit">
        <option value="MPa">MPa</option>
        <option value="ksi">ksi</option>
        <option value="psi">psi</option>
        <option value="kgcm2">kg/cm¬≤</option>
      </select>
    </div>
  </div>

  <!-- ‚úÖ Row 2: R & E -->
  <div class="input-grid" style="margin-top:10px;">
    <div>
      <label>Inside Radius (R)</label>
      <input type="number" id="radius" step="0.01" />
    </div>
    <div>
      <label>Unit</label>
      <select id="radiusUnit">
        <option value="mm">mm</option>
        <option value="inch">inch</option>
      </select>
    </div>
    <div>
      <label>Joint Efficiency (E)</label>
      <input type="number" id="efficiency" step="0.01" value="1.0" />
    </div>
    <div></div> <!-- ‚úÖ empty cell to keep grid alignment -->
  </div>
</div>

  <!-- ‚úÖ ELLIPSOIDAL HEAD -->
  <div id="dishedEndForm" class="form-section" style="display: none;">
    <h3>Ellipsoidal Head Inputs:</h3>
    <div class="input-grid">
      <div>
        <label>Internal Pressure (P)</label>
        <div class="input-with-unit">
          <input type="number" id="pressureDished" step="0.01" />
          <select id="pressureDishedUnit">
            <option value="MPa">MPa</option>
            <option value="bar">bar</option>
            <option value="kgcm2">kg/cm¬≤</option>
            <option value="psi">psi</option>
          </select>
        </div>
      </div>
      <div>
        <label>Inside Diameter (D)</label>
        <div class="input-with-unit">
          <input type="number" id="diameterDished" step="0.01" />
          <select id="diameterDishedUnit">
            <option value="mm">mm</option>
            <option value="inch">inch</option>
          </select>
        </div>
      </div>
      <div>
        <label>Design Stress (S)</label>
        <div class="input-with-unit">
          <input type="number" id="stressDished" step="0.01" />
          <select id="stressDishedUnit">
            <option value="MPa">MPa</option>
            <option value="ksi">ksi</option>
            <option value="psi">psi</option>
            <option value="kgcm2">kg/cm¬≤</option>
          </select>
        </div>
      </div>
      <div>
        <label>Joint Efficiency (E)</label>
        <input type="number" id="efficiencyDished" step="0.01" value="1.0" />
      </div>
    </div>
  </div>

  <!-- ‚úÖ TORISPHERICAL HEAD -->
  <div id="torisphericalForm" class="form-section" style="display: none;">
    <h3>Torispherical Head Inputs:</h3>
    <div class="input-grid">
      <div>
        <label>Internal Pressure (P)</label>
        <div class="input-with-unit">
          <input type="number" id="pressureTori" step="0.01" />
          <select id="pressureToriUnit">
            <option value="MPa">MPa</option>
            <option value="bar">bar</option>
            <option value="kgcm2">kg/cm¬≤</option>
            <option value="psi">psi</option>
          </select>
        </div>
      </div>
      <div>
        <label>Inside Diameter (D)</label>
        <div class="input-with-unit">
          <input type="number" id="diameterTori" step="0.01" />
          <select id="diameterToriUnit">
            <option value="mm">mm</option>
            <option value="inch">inch</option>
          </select>
        </div>
      </div>
      <div>
        <label>Design Stress (S)</label>
        <div class="input-with-unit">
          <input type="number" id="stressTori" step="0.01" />
          <select id="stressToriUnit">
            <option value="MPa">MPa</option>
            <option value="ksi">ksi</option>
            <option value="psi">psi</option>
            <option value="kgcm2">kg/cm¬≤</option>
          </select>
        </div>
      </div>
      <div>
        <label>Joint Efficiency (E)</label>
        <input type="number" id="efficiencyTori" step="0.01" value="1.0" />
      </div>
    </div>
  </div>

  <!-- ‚úÖ HEMISPHERICAL HEAD -->
  <div id="hemiForm" class="form-section" style="display: none;">
    <h3>Hemispherical Head Inputs:</h3>
    <div class="input-grid">
      <div>
        <label>Internal Pressure (P)</label>
        <div class="input-with-unit">
          <input type="number" id="pressureHemi" step="0.01" />
          <select id="pressureHemiUnit">
            <option value="MPa">MPa</option>
            <option value="bar">bar</option>
            <option value="kgcm2">kg/cm¬≤</option>
            <option value="psi">psi</option>
          </select>
        </div>
      </div>
      <div>
        <label>Inside Diameter (D)</label>
        <div class="input-with-unit">
          <input type="number" id="diameterHemi" step="0.01" />
          <select id="diameterHemiUnit">
            <option value="mm">mm</option>
            <option value="inch">inch</option>
          </select>
        </div>
      </div>
      <div>
        <label>Design Stress (S)</label>
        <div class="input-with-unit">
          <input type="number" id="stressHemi" step="0.01" />
          <select id="stressHemiUnit">
            <option value="MPa">MPa</option>
            <option value="ksi">ksi</option>
            <option value="psi">psi</option>
            <option value="kgcm2">kg/cm¬≤</option>
          </select>
        </div>
      </div>
      <div>
        <label>Joint Efficiency (E)</label>
        <input type="number" id="efficiencyHemi" step="0.01" value="1.0" />
      </div>
    </div>
  </div>

  <!-- ‚úÖ Calculate Button -->
  <button onclick="calculateASMEThickness()">Calculate</button>



  <!-- ‚úÖ Results -->
  <div id="results"></div>
</div>


<!-- ‚úÖ Inspection confidence Tab 581 and GE (Unique IDs Added) -->
<!-- ‚úÖ Inspection confidence Tab 581 and GE (Updated Layout) -->
<div id="inspectionconfidenceTab" class="tab-content" style="display:none;">
  <h2>Aggregate Inspection Confidence (AIC) Calculator</h2>

  <!-- ‚úÖ Inputs Section -->
  <div class="input-box">
    <!-- Row 1: Year + Inspection Type + Inspection Method -->
    <div class="form-row">
      <div class="form-field">
        <label for="inspectionYear_AIC">Year:</label>
        <input type="number" id="inspectionYear_AIC" placeholder="e.g., 2025" />
      </div>

      <div class="form-field">
        <label for="inspectionType_AIC">Inspection Type:</label>
        <select id="inspectionType_AIC" onchange="toggleCategoryDropdown_AIC()">
          <option value="">-- Select --</option>
          <option value="internal">Internal</option>
          <option value="external">External</option>
        </select>
      </div>

      <div class="form-field">
        <label for="inspectionMethod_AIC">Inspection Method:</label>
        <select id="inspectionMethod_AIC">
          <option value="">-- Select Equipment, Type, and Category First --</option>
        </select>
      </div>
    </div>

    <!-- Row 2: Equipment Type + Inspection Category + Buttons -->
    <div class="form-row">
      <div class="form-field">
        <label for="equipmentType_AIC">Equipment Type:</label>
        <select id="equipmentType_AIC" onchange="toggleMethodDropdown_AIC()">
          <option value="">-- Select --</option>
          <option value="piping">Piping</option>
          <option value="vessel">Vessel</option>
          <option value="exchanger">Exchanger</option>
          <option value="column">Column</option>
          <option value="airfin">Air Fin Cooler</option>
        </select>
      </div>

      <div class="form-field">
        <label for="inspectionCategory_AIC">Inspection Category:</label>
        <select id="inspectionCategory_AIC" onchange="toggleMethodDropdown_AIC()">
          <option value="">-- Select --</option>
        </select>
      </div>

      <!-- Buttons grouped inside a form-field for alignment -->
      <div class="form-field">
        <label>&nbsp;</label> <!-- Blank label to keep vertical space aligned -->
        <div class="button-group-inline">
          <button onclick="addInspection_AIC()">Add</button>
          <button class="reset-btn" onclick="resetData_AIC()">Reset</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚úÖ Table -->
  <h3>Added Inspections</h3>
  <table id="inspectionTable_AIC" border="1" style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr>
        <th>Year</th>
        <th>Equipment</th>
        <th>Inspection Type</th>
        <th>Inspection Category</th>
        <th>Inspection Method</th>
        <th>Confidence Level</th>
        <th>Equivalent</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- ‚úÖ Triangle + Summary -->
  <div class="triangle-summary" style="display: flex; gap: 40px; margin-top: 20px;">
    <div class="triangle" style="width: 140px;">
      <div class="section vh" id="tri-vh_AIC">VH</div>
      <div class="section h" id="tri-h_AIC">H</div>
      <div class="section m" id="tri-m_AIC">M</div>
      <div class="section l" id="tri-l_AIC">L</div>
    </div>

    <div class="summary" style="background: #f8f8f8; padding: 15px 20px; border-radius: 6px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); min-width: 220px;">
      <h4>Summary</h4>
      <p><strong>Total Equivalent:</strong> <span id="totalEquivalent_AIC">-</span></p>
      <p><strong>Aggregate No. of Inspections (ANI):</strong> <span id="aggregateInspections_AIC">-</span></p>
      <p><strong>AIC (Confidence):</strong> <span id="aicValue_AIC">-</span></p>
    </div>
  </div>
</div>




<!-- Cracking Mechanism Tab -->
<div id="crackingMechanismTab" class="tab-content" style="display: none;">
  <section id="crackingMechanismFinder" class="mechanism-form-section">
    <h2>Cracking Mechanism Finder</h2>

    <form id="mechanismInputForm" class="mechanism-form-grid" onsubmit="event.preventDefault(); findMechanism();">
      <div class="form-field">
        <label for="inputH2S">H‚ÇÇS (ppm):</label>
        <input type="number" id="inputH2S" name="h2s" />
      </div>

      <div class="form-field">
        <label for="selectFreeH2O">Free H‚ÇÇO:</label>
        <select id="selectFreeH2O" name="freeH2O">
          <option value="">--Select--</option>
          <option value="yes">Yes</option>
          <option value="no">No</option>
        </select>
      </div>

      <div class="form-field">
        <label for="selectPWHT">PWHT:</label>
        <select id="selectPWHT" name="pwht">
          <option value="">--Select--</option>
          <option value="yes">Yes</option>
          <option value="no">No</option>
        </select>
      </div>

      <div class="form-field">
        <label for="inputHCN">HCN (ppm):</label>
        <input type="number" id="inputHCN" name="hcn" />
      </div>

      <div class="form-field">
        <label for="inputPH">pH:</label>
        <input type="number" step="0.1" id="inputPH" name="ph" />
      </div>

      <div class="form-field">
        <label for="inputChloride">Chloride (ppm):</label>
        <input type="number" id="inputChloride" name="chloride" />
      </div>

      <div class="form-field">
        <label for="inputOxygen">Dissolved Oxygen (ppm):</label>
        <input type="number" id="inputOxygen" name="oxygen" />
      </div>

      <div class="form-field">
        <label for="inputTemp">Temperature (¬∞F):</label>
        <input type="number" id="inputTemp" name="temp" />
      </div>

      <div class="form-field">
        <label for="inputCaustic">Caustic Concentration (%):</label>
        <input type="number" id="inputCaustic" name="caustic" />
      </div>

      <div class="form-field">
        <label for="selectDEA">DEA / Amine Present:</label>
        <select id="selectDEA" name="dea">
          <option value="">--Select--</option>
          <option value="yes">Yes</option>
          <option value="no">No</option>
        </select>
      </div>

      <div class="form-field">
        <label for="selectAmineType">Amine Type:</label>
        <select id="selectAmineType" name="amineType">
          <option value="">--Select--</option>
          <option value="MEA">MEA</option>
          <option value="DEA">DEA</option>
          <option value="MDEA">MDEA</option>
          <option value="Others">Others</option>
        </select>
      </div>

      <div class="form-field">
        <label for="selectScale">Scale Present:</label>
        <select id="selectScale" name="scale">
          <option value="">--Select--</option>
          <option value="yes">Yes</option>
          <option value="no">No</option>
        </select>
      </div>

      <div class="form-field">
        <label for="selectStability">Operating Stability:</label>
        <select id="selectStability" name="stability">
          <option value="">--Select--</option>
          <option value="stable">Stable</option>
          <option value="upset">Upset</option>
        </select>
      </div>

      <div class="form-field">
        <label for="selectMaterialType">Material Type:</label>
        <select id="selectMaterialType" name="materialType">
          <option value="">--Select--</option>
          <option value="Carbon Steel">Carbon Steel</option>
          <option value="Sensitized Austenitic SS">Sensitized Austenitic SS</option>
          <option value="Stabilized 321 and 347">Stabilized 321 and 347</option>
          <option value="300 Series SS">300 Series SS</option>
        </select>
      </div>

      <div class="form-submit">
        <button type="submit">Find Mechanism</button>
      </div>
    </form>

    <div id="mechanismResult" class="result-output"></div>
  </section>
</div>




<!-- ‚úÖ stress value Calculator Tab -->
<!-- ‚úÖ stress value Calculator Tab -->
<div id="bkStressTab" class="tab-content" style="display:none; margin-top: 30px;">
  <h2>Allowable Stress value</h2>

  <form id="bkStressForm">
    <div style="display: flex; gap: 20px; flex-wrap: wrap;">
      <div style="flex: 1; min-width: 200px;">
        <label for="bkYearSelect">Select Year:</label>
        <select id="bkYearSelect" style="width: 100%;">
          <option value="">-- Select Year --</option>
        </select>
      </div>
      <div style="flex: 1; min-width: 200px;">
        <label for="bkMaterialSelect">Select Material:</label>
        <select id="bkMaterialSelect" disabled style="width: 100%;">
          <option value="">-- Select Material --</option>
        </select>
      </div>
    </div>

    <div style="display: flex; gap: 20px; flex-wrap: wrap; margin-top: 15px;">
      <div style="flex: 1; min-width: 200px;">
        <label for="bkGradeSelect">Select Grade:</label>
        <select id="bkGradeSelect" disabled style="width: 100%;">
          <option value="">-- Select Grade --</option>
        </select>
      </div>
      <div style="flex: 1; min-width: 200px;">
        <label for="bkThicknessSelect">Select Thickness (mm):</label>
        <select id="bkThicknessSelect" disabled style="width: 100%;">
          <option value="">-- Select Thickness --</option>
          <option value=">10mm">&gt;10 mm</option>
          <option value="‚â§10mm">&le;10 mm</option>
        </select>
      </div>
      <div style="flex: 1; min-width: 200px;">
        <label for="bkTemperatureInput">Enter Temperature (¬∞C):</label>
        <input type="number" id="bkTemperatureInput" placeholder="e.g. 100" disabled style="width: 100%;" />
      </div>
    </div>
  </form>

  <div id="bkOutputDiv" style="display:none; margin-top: 20px; background: #f9f9f9; padding: 15px; border-radius: 5px;">
    <p><strong>Allowable Stress Value:</strong> <span id="bkStressValue"></span> MPa</p>
    <p><strong>Yield Strength:</strong> <span id="bkYieldStrength"></span> MPa</p>
    <p><strong>Tensile Strength:</strong> <span id="bkTensileStrength"></span> MPa</p>
  </div>
</div>


 <!-- ‚úÖ Inventory Calculator Tab -->
<!-- ‚úÖ Inventory Calculator Tab -->
<div class="tab-content" id="inventoryTab">
  <div class="container">
    <div class="main-content">

      <!-- Sub-tab buttons -->
      <div style="margin-bottom: 20px;">
        <button onclick="showInventoryCalculator()" style="margin-right: 10px;">üìè Inventory Calculator</button>
        <button onclick="showBulkUploader()">üì• Bulk Inventory Upload</button>
      </div>

      <!-- ‚úÖ Inventory Calculator Section -->
      <div id="inventoryCalcSection">
        <!-- Shape Selection -->
        <label for="shape">Select Equipment Shape:</label>
        <select id="shape" onchange="handleShapeSelection()">
          <option value="">-- Select --</option>
          <option value="cylinder">Cylinder</option>
          <option value="sphere">Sphere</option>
        </select>

        <!-- Phase Selection -->
        <div id="phaseSection" class="hidden">
          <label for="phaseInventory">Select Fluid Phase:</label>
          <select id="phaseInventory" onchange="handlePhaseSelection()">
            <option value="">-- Select --</option>
            <option value="liquid">Liquid</option>
            <option value="vapor">Vapor</option>
            <option value="both">Two-Phase</option>
          </select>
        </div>

        <!-- Dimensions (Hidden for vapor) -->
        <div id="shapeInputs" class="input-grid">
          <div class="input-group">
            <label>Diameter (ID):</label>
            <input type="number" id="inv_diameter" step="0.01">
          </div>
          <div class="input-group">
            <label>Diameter Unit:</label>
            <select id="inv_diameterUnit">
              <option value="1">m</option>
              <option value="0.01">cm</option>
              <option value="0.001">mm</option>
            </select>
          </div>
          <div class="input-group">
            <label>Length / Height:</label>
            <input type="number" id="inv_length" step="0.01">
          </div>
          <div class="input-group">
            <label>Length Unit:</label>
            <select id="inv_lengthUnit">
              <option value="1">m</option>
              <option value="0.01">cm</option>
              <option value="0.001">mm</option>
            </select>
          </div>
        </div>

        <!-- Dished Ends -->
<!-- Dished Ends (hidden by default) -->
<div id="addHeadCheckboxDiv" class="checkbox-row hidden">
  <input type="checkbox" id="addHeadCheckbox" onchange="toggleHeadSelection()">
  <label for="addHeadCheckbox">Add Dished Ends?</label>
</div>

<div id="headTypeSection" class="hidden">
  <label for="headType">Select Head Type:</label>
  <select id="headType">
    <option value="hemihead">Hemispherical</option>
    <option value="torispherical">Torispherical</option>
    <option value="ellipsoidalhead">Ellipsoidal (2:1)</option>
  </select>

  <label for="headCount">How many heads?</label>
  <select id="headCount">
    <option value="2" selected>2 (Both Ends)</option>
    <option value="1">1 Head</option>
    <option value="0">No Head</option>
  </select>
</div>



        <!-- Manual Volume -->
        <div id="manualVolumeFields" class="hidden">
          <div class="checkbox-row">
            <input type="checkbox" id="manualVolumeOverride" onchange="toggleManualVolume()">
            <label for="manualVolumeOverride">Use Manual Volume</label>
          </div>

          <div class="input-grid">
            <div class="input-group">
              <label for="volume">Manual Volume:</label>
              <input type="number" id="volume" placeholder="Volume" step="0.01">
            </div>
            <div class="input-group">
              <label for="volumeUnit">Unit:</label>
              <select id="volumeUnit">
                <option value="m3">m¬≥</option>
                <option value="ft3">ft¬≥</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Liquid Inputs -->
        <div id="liquidInputs" class="hidden">
          <div class="input-grid">
            <div class="input-group">
              <label for="equipmentType">Equipment Type:</label>
              <select id="equipmentType">
                <optgroup label="Columns">
                  <option value="COLTOP">Top (25%)</option>
                  <option value="COLMID">Middle (25%)</option>
                  <option value="COLBTM">Bottom (37%)</option>
                </optgroup>
                <optgroup label="Drums & KO Pots">
                  <option value="DRUM">Drum (50%)</option>
                  <option value="KODRUM">KO Pot (10%)</option>
                </optgroup>
                <optgroup label="Compressors/Pumps">
                  <option value="COMP">Compressor (0%)</option>
                  <option value="PUMP">Pump (100%)</option>
                </optgroup>
                <optgroup label="Exchangers">
                  <option value="HEX">Heat Exchanger (50%)</option>
                  <option value="FINFAN">Fin Fan Cooler (25%)</option>
                </optgroup>
                <optgroup label="Other">
                  <option value="FILTER">Filter (100%)</option>
                  <option value="PIPE">Piping (100%)</option>
                  <option value="REACTOR">Reactor (15%)</option>
                </optgroup>
                <option value="custom">Custom %</option>
              </select>
            </div>

            <div class="input-group">
              <label for="fluidType">Fluid Type:</label>
              <select id="fluidType" onchange="autoFillDensity()">
                <option value="">-- Select Fluid --</option>
                <option value="water">Water</option>
                <option value="diesel">Diesel</option>
                <option value="crude">Crude Oil</option>
                <option value="ammonia">Ammonia</option>
                <option value="custom">Other / Custom</option>
              </select>
            </div>

            <div class="input-group">
              <label for="density">Density (kg/m¬≥):</label>
              <input type="number" id="density" step="0.1">
            </div>
          </div>

          <div id="customPercentDiv" class="hidden">
            <label for="customPercent">Custom Liquid % (0‚Äì1):</label>
            <input type="number" id="customPercent" step="0.01">
          </div>
        </div>

        <!-- Vapor Inputs -->
        <div id="vaporInputs" class="hidden">
          <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap; margin-bottom: 15px;">
            <div style="display: flex; flex-direction: column;">
              <label for="flowRate" style="font-weight: bold;">Flow Rate</label>
              <input type="number" id="flowRate" placeholder="e.g. 12000" style="width: 140px;">
            </div>
            <div style="display: flex; flex-direction: column;">
              <label for="flowRateUnit" style="font-weight: bold;">Unit</label>
              <select id="flowRateUnit" style="width: 100px;">
                <option value="kg/s">kg/s</option>
                <option value="kg/min">kg/min</option>
                <option value="kg/h">kg/h</option>
              </select>
            </div>
            <div style="display: flex; flex-direction: column;">
              <label for="residenceTime" style="font-weight: bold;">Residence Time</label>
              <input type="number" id="residenceTime" value="180" min="1" style="width: 140px;">
            </div>
            <div style="display: flex; flex-direction: column;">
              <label for="residenceTimeUnit" style="font-weight: bold;">Unit</label>
              <select id="residenceTimeUnit" style="width: 100px;">
                <option value="s">seconds</option>
                <option value="min">minutes</option>
                <option value="h">hours</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Calculate Button -->
        <button onclick="calculateInventory()">Calculate Inventory</button>
        <div id="inventoryResult" style="margin-top: 20px; font-weight: bold; color: green;"></div>
      </div>

      <!-- ‚úÖ Bulk Upload Section (Hidden by default) -->
      <div id="bulkUploadSection" style="display: none;">
        <h3>üì• Bulk Inventory Upload</h3>
        <input type="file" id="bulkUploadInput" accept=".xlsx,.csv" />
        <a href="templates/Inventory_Template_With_Picklist.xlsx" download style="
          background: dodgerblue; 
          color: white; 
          padding: 10px 15px; 
          border: none; 
          border-radius: 5px; 
          text-decoration: none; 
          display: inline-block;
        ">
          üì• Download Excel Format
        </a>
        <button onclick="resetBulk()">üîÑ Reset</button>

        <div id="bulkModal">
          <button id="closeBtnBulk" onclick="closeBulkModal()">‚ùå Close</button>
          <h3>üì¶ Inventory Summary</h3>
          <button onclick="processBulkData()">‚úÖ Calculate Inventory</button>
          <button onclick="downloadBulkPDF()">üìÑ Download PDF</button>
          <div id="bulkResultsTable"></div>
        </div>
      </div>

    </div>
  </div>
</div>


  

  <!-- Load data + dependencies first -->
<script src="data.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<!-- ‚úÖ Load Chart.js first -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="chart.js?v=3"></script>  <!-- Must come BEFORE dashboard.js -->

<!-- ‚úÖ Then your logic files -->
<script src="dashboard.js"></script> 
 <script src="script.js"></script>



    



  <!-- ‚úÖ Auto Logout After 10 Minutes of Inactivity -->




        

<!-- ‚úÖ jQuery & Select2 JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<!-- ‚úÖ Your Fluid Selector Logic -->
<script src="fluid-selector.js"></script>

    <!-- ‚úÖ robot assistant-->
<script src="chatbot.js"></script>
  
<!-- ‚úÖ Your Inventory Logic -->
  <script src="inventory.js"></script>
<script src="inventoryChart.js"></script>
<script src="cylinderviz.js"></script>

    <!-- ‚úÖ Your Inspection confidence -->
  <script src="inspectioncofidence.js"></script>

    <!-- ‚úÖ Your Inventory Logic -->
  <script src="b313.js"></script>
    <!-- ‚úÖ Your Inventory Logic -->
  <script src="viiidiv1.js"></script>


    <!-- ‚úÖ Your Remaining life Logic -->
    <script src="remaining.js"></script>

      <!-- ‚úÖ Your Toxic LogIC -->
    <script src="Toxic.js"></script>

    <!-- ‚úÖ Your process Flow Diagrams-->
    <script src="main.js"></script>
    <script src="Damagemechanism.js"></script>
    <script src="main-cduvdu.js"></script>
    <script src="cduvduDamageMechanisms.js"></script>
     <script src="msp.js"></script>
    <script src="mspDamageMechanisms.js"></script>

  <script src="h2u.js"></script>
    <script src="h2uDamageMechanisms.js"></script>
    
    <!-- ‚úÖ For search Files -->
  <script src="categoryLoader.js"></script>
  <script src="search.js"></script>

       <!-- ‚úÖ initial potential -->
  <script src="mechanism.js"></script>

        <!-- ‚úÖ stress value -->
  <script src="bk_stressscript.js"></script>
<script src="bk_stressData.js"></script>

         <!-- ‚úÖ globaly ibeam js code -->
        <script src="global-script.js"></script>

        
         <!-- ‚úÖ probability js code -->
        <script src="probability.js"></script>

        <!-- ‚úÖ api581 js code -->
        <script src="api581.js"></script>
        


<!-- jsPDF core -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- jsPDF AutoTable plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

<!-- SheetJS for Excel (if not already included) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>


        
   

  <!-- Add these scripts just before </body> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

        <!-- for chatbot auto format -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        
<!-- ‚úÖ Load Bulk Upload Logic after dependencies -->
<script src="bulkupload.js" defer></script>

  <script src="js/logic.js"></script>

  <script type="module" src="js/firebase-auth.js"></script>
    

<!-- Chatbot Container -->
<div id="chatbot-widget">
  <!-- Chat Icon (Toggle Button) -->
  <div id="chat-icon" onclick="toggleChat()">
    <img src="image/AnnaAVBot.png" alt="Chatbot Icon" class="chatbot-icon-img" />
  </div>

  <!-- Chat Box (Initially Hidden) -->
  <div id="chat-box" class="hidden">
    <div id="chat-header" style="display: flex; align-items: center; gap: 5px;">
      <span>KayetBot Assistant</span>
      <div style="margin-left: auto; display: flex; gap: 5px;">
        <button id="maximize-btn" onclick="toggleMaximize()">‚õ∂</button>
        <button id="close-btn" onclick="closeChat()">‚úñ</button>
      </div>
    </div>

    <div id="chat-log"></div>

    <!-- Input and Suggestions -->
    <div class="input-wrapper">
      <input 
        type="text" 
        id="chat-input" 
        placeholder="Ask anything..." 
        onkeyup="handleChat(event); updateSuggestions();" 
        autocomplete="off"
      />
      <div id="suggestions" class="suggestion-box"></div>
    </div>
  </div>
</div>




        
 <!-- ‚úÖ Footer -->
<footer class="footer">
  <div class="footer-center">
    <div class="footer-logo">
      <img src="image/logo.png" alt="Logo" />
    </div>
    <div class="footer-credit">&copy; 2025 | Created by Avijit Kayet</div>
    <div class="footer-links">
      <a href="about.html">About</a>
      <a href="privacy.html">Privacy Policy</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>
  <button class="logout-button" onclick="logout()">Logout</button>
</footer>



   
     
</body>
</html>
    
